# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Telegram  â”‚
â”‚    User     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Webhook
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Vercel Serverless           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     api/webhook.ts            â”‚  â”‚
â”‚  â”‚  (Entry Point)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       src/bot.ts              â”‚  â”‚
â”‚  â”‚  (Main Bot Logic)             â”‚  â”‚
â”‚  â”‚  - Commands                   â”‚  â”‚
â”‚  â”‚  - Actions                    â”‚  â”‚
â”‚  â”‚  - Handlers                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚      â”‚               â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ API    â”‚      â”‚ Utils  â”‚         â”‚
â”‚  â”‚ Layer  â”‚      â”‚ Layer  â”‚         â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”       â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ APIs  â”‚       â”‚ Supabaseâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ

```
User â†’ Telegram â†’ Webhook â†’ Vercel â†’ Bot Handler
```

### 2. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°

```
Bot Handler â†’ Rate Limit Check â†’ Database
            â†“
         Process Request
            â†“
      Search API (Modrinth/CurseForge)
            â†“
         Format Response
            â†“
      Send to User
            â†“
      Log to Database
```

### 3. Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°

```
User clicks Download
    â†“
Check File Size
    â†“
If < 50MB:
    Download â†’ Buffer â†’ Send to User
If > 50MB:
    Send Direct Link
    â†“
Log to Database
```

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

```
minecraft-mods-bot/
â”‚
â”œâ”€â”€ api/                          # Vercel Serverless Functions
â”‚   â””â”€â”€ webhook.ts               # Webhook endpoint
â”‚
â”œâ”€â”€ src/                         # Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´
â”‚   â”œâ”€â”€ api/                     # API ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ modrinth.ts         # Modrinth API
â”‚   â”‚   â””â”€â”€ curseforge.ts       # CurseForge API
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                   # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ download.ts         # Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
â”‚   â”‚   â””â”€â”€ helpers.ts          # Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ bot.ts                   # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ±Ğ¾Ñ‚Ğ°
â”‚   â”œâ”€â”€ config.ts                # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ database.ts              # Supabase Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ keyboards.ts             # Inline ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹
â”‚   â””â”€â”€ index.ts                 # Dev entry point
â”‚
â”œâ”€â”€ .env                         # ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (Ğ½Ğµ Ğ² git)
â”œâ”€â”€ .env.example                 # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…
â”œâ”€â”€ .gitignore                   # Git ignore
â”œâ”€â”€ .vercelignore               # Vercel ignore
â”‚
â”œâ”€â”€ package.json                 # Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”œâ”€â”€ tsconfig.json               # TypeScript ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
â”œâ”€â”€ vercel.json                 # Vercel ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
â”‚
â”œâ”€â”€ supabase-setup.sql          # SQL Ğ´Ğ»Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ‘Ğ”
â”œâ”€â”€ supabase-analytics.sql      # SQL Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸
â”‚
â”œâ”€â”€ README.md                    # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ QUICKSTART.md               # Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
â”œâ”€â”€ SETUP_GUIDE.md              # ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ³Ğ°Ğ¹Ğ´
â”œâ”€â”€ SUPABASE_GUIDE.md           # Ğ“Ğ°Ğ¹Ğ´ Ğ¿Ğ¾ Supabase
â”œâ”€â”€ CONTRIBUTING.md             # Ğ“Ğ°Ğ¹Ğ´ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²
â”œâ”€â”€ FEATURES.md                 # Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¸ roadmap
â”œâ”€â”€ CHEATSHEET.md               # Ğ¨Ğ¿Ğ°Ñ€Ğ³Ğ°Ğ»ĞºĞ°
â”œâ”€â”€ ARCHITECTURE.md             # Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»
â””â”€â”€ LICENSE                     # Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ
```

## ğŸ”Œ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1. Telegram Bot (Telegraf)

**ĞÑ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ:**
- ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
- ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ¸ callback'Ğ¾Ğ²
- ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:**
- Telegraf 4.x
- Webhook mode (Ğ´Ğ»Ñ Vercel)

### 2. Vercel Serverless

**ĞÑ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ:**
- Ğ¥Ğ¾ÑÑ‚Ğ¸Ğ½Ğ³ Ğ±Ğ¾Ñ‚Ğ°
- ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° webhook Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Ğ¥Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ (~100-500ms)
- Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ: 10 ÑĞµĞºÑƒĞ½Ğ´ (Hobby), 60 ÑĞµĞºÑƒĞ½Ğ´ (Pro)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### 3. Supabase (PostgreSQL)

**ĞÑ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ:**
- Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
- Rate limiting
- ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°

**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:**
- `user_requests` - Ğ»Ğ¾Ğ³Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- `search_history` - Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
- `download_stats` - ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğ¹

### 4. External APIs

**Modrinth API:**
- ĞŸĞ¾Ğ¸ÑĞº Ğ¼Ğ¾Ğ´Ğ¾Ğ²/ÑˆĞµĞ¹Ğ´ĞµÑ€Ğ¾Ğ²/Ñ€ĞµÑÑƒÑ€ÑĞ¿Ğ°ĞºĞ¾Ğ²
- ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¹
- ĞŸÑ€ÑĞ¼Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° Ñ„Ğ°Ğ¹Ğ»Ñ‹
- Ğ‘ĞµĞ· API ĞºĞ»ÑÑ‡Ğ° (Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹)

**CurseForge API:**
- ĞŸĞ¾Ğ¸ÑĞº Ğ¼Ğ¾Ğ´Ğ¾Ğ²
- ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
- Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ API ĞºĞ»ÑÑ‡
- Rate limit: 1000 req/hour

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Rate Limiting

```typescript
// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ² Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
const requests = await supabase
  .from('user_requests')
  .select('*')
  .eq('user_id', userId)
  .gte('timestamp', oneMinuteAgo);

if (requests.length >= 3) {
  return false; // Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ°
}
```

### Environment Variables

```
Ğ’ÑĞµ ÑĞµĞºÑ€ĞµÑ‚Ñ‹ Ğ² Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ:
- TELEGRAM_BOT_TOKEN
- CURSEFORGE_API_KEY
- SUPABASE_KEY

ĞĞ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑÑ‚ÑÑ Ğ² git!
```

### Row Level Security (RLS)

```sql
-- Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ
CREATE POLICY "Service role full access" 
ON user_requests FOR ALL 
TO service_role
USING (true);

-- Anon Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²ÑÑ‚Ğ°Ğ²Ğ»ÑÑ‚ÑŒ
CREATE POLICY "Anon can insert" 
ON user_requests FOR INSERT 
TO anon
WITH CHECK (true);
```

## âš¡ ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

1. **Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ² Ğ‘Ğ”**
   ```sql
   CREATE INDEX idx_user_requests_user_timestamp 
   ON user_requests(user_id, timestamp DESC);
   ```

2. **Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²**
   ```typescript
   const results = await searchModrinth(query);
   return results.slice(0, 10); // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ 10 Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
   ```

3. **Timeout Ğ´Ğ»Ñ API**
   ```typescript
   axios.get(url, { timeout: 30000 }); // 30 ÑĞµĞºÑƒĞ½Ğ´
   ```

4. **Ğ‘ÑƒÑ„ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²**
   ```typescript
   const buffer = await downloadFile(url);
   // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¸Ğ· Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸, Ğ±ĞµĞ· Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ½Ğ° Ğ´Ğ¸ÑĞº
   ```

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸

- **Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°:** < 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
- **Rate limit:** 3 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°/Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ
- **Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ñ„Ğ°Ğ¹Ğ»Ğ°:** Ğ´Ğ¾ 50 ĞœĞ‘
- **Timeout API:** 30 ÑĞµĞºÑƒĞ½Ğ´

## ğŸ”„ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°

### ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° /start

```
1. User: /start
2. Telegram â†’ Vercel webhook
3. Bot: ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ update
4. Bot: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° rate limit (Supabase)
5. Bot: Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° (Supabase)
6. Bot: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¼ĞµĞ½Ñ
7. Telegram â†’ User: ĞœĞµĞ½Ñ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
```

### ĞŸĞ¾Ğ¸ÑĞº Ğ¼Ğ¾Ğ´Ğ°

```
1. User: ĞĞ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ĞœĞ¾Ğ´Ñ‹"
2. Bot: Callback handler
3. Bot: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° rate limit
4. Bot: Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ²Ğ²Ğ¾Ğ´Ğ°
5. User: Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚ "JEI"
6. Bot: Text handler
7. Bot: searchModrinth("JEI")
8. Modrinth API: Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
9. Bot: Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
10. Bot: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² search_history
11. Bot: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¿Ğ¸ÑĞºĞ° Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
12. User: Ğ’Ğ¸Ğ´Ğ¸Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹
```

### Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°

```
1. User: Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ²ĞµÑ€ÑĞ¸Ñ
2. Bot: Callback handler
3. Bot: getModrinthVersions()
4. Bot: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ°
5. If < 50MB:
   a. Bot: downloadFile()
   b. Bot: replyWithDocument()
6. If > 50MB:
   a. Bot: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑÑÑ‹Ğ»ĞºĞ¸
7. Bot: Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² download_stats
8. User: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»/ÑÑÑ‹Ğ»ĞºÑƒ
```

## ğŸš€ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹

- **Vercel Free:**
  - 100 GB bandwidth/Ğ¼ĞµÑÑÑ†
  - 100 Ñ‡Ğ°ÑĞ¾Ğ² Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ/Ğ¼ĞµÑÑÑ†
  - Unlimited requests

- **Supabase Free:**
  - 500 MB database
  - 1 GB bandwidth/Ğ¼ĞµÑÑÑ†
  - 50,000 monthly active users

### ĞšĞ¾Ğ³Ğ´Ğ° Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ?

1. **> 10,000 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹/Ğ¼ĞµÑÑÑ†**
   - Upgrade Vercel to Pro ($20/Ğ¼ĞµÑ)
   - Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ bandwidth Ğ¸ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ

2. **> 500 MB Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ‘Ğ”**
   - Upgrade Supabase to Pro ($25/Ğ¼ĞµÑ)
   - 8 GB database

3. **> 1000 req/hour Ğº CurseForge**
   - ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Redis

### Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

1. **ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**
   ```typescript
   import NodeCache from 'node-cache';
   const cache = new NodeCache({ stdTTL: 600 });
   ```

2. **ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡**
   ```typescript
   import Bull from 'bull';
   const queue = new Bull('downloads');
   ```

3. **CDN Ğ´Ğ»Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²**
   - Cloudflare R2
   - AWS S3 + CloudFront

4. **Ğ ĞµĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ‘Ğ”**
   - Supabase read replicas
   - Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ read/write

## ğŸ”§ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ

1. **ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**
   - Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° API
   - Ğ’Ñ€ĞµĞ¼Ñ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
   - Ğ¥Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğµ ÑÑ‚Ğ°Ñ€Ñ‚Ñ‹ Vercel

2. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**
   - DAU/MAU
   - ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²
   - ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğ¹

3. **ĞÑˆĞ¸Ğ±ĞºĞ¸**
   - API errors
   - Database errors
   - Timeout errors

4. **Ğ ĞµÑÑƒÑ€ÑÑ‹**
   - Vercel bandwidth
   - Supabase storage
   - Database connections

### Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹

- **Vercel Analytics** - Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
- **Supabase Logs** - database queries
- **Custom logging** - Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

## ğŸ“Š Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   user_requests     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ user_id             â”‚â—„â”€â”€â”€â”€â”
â”‚ username            â”‚     â”‚
â”‚ request_type        â”‚     â”‚
â”‚ timestamp           â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   search_history    â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚ id (PK)             â”‚     â”‚
â”‚ user_id             â”‚â”€â”€â”€â”€â”€â”¤
â”‚ query               â”‚     â”‚
â”‚ result_count        â”‚     â”‚
â”‚ timestamp           â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   download_stats    â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚ id (PK)             â”‚     â”‚
â”‚ user_id             â”‚â”€â”€â”€â”€â”€â”˜
â”‚ project_name        â”‚
â”‚ project_id          â”‚
â”‚ file_size           â”‚
â”‚ source              â”‚
â”‚ timestamp           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°

1. **Serverless First**
   - Ğ‘ĞµĞ· ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
   - Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ñ…Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
   - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

2. **Fail Fast**
   - Timeout Ğ´Ğ»Ñ Ğ²ÑĞµÑ… API
   - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²ÑĞµÑ… Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
   - Graceful degradation

3. **User Privacy**
   - ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
   - ĞĞ²Ñ‚Ğ¾Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ° ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ»Ğ¾Ğ³Ğ¾Ğ²
   - ĞĞ½Ğ¾Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

4. **Developer Experience**
   - TypeScript Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
   - ĞŸĞ¾Ğ½ÑÑ‚Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ´Ğ°
   - ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

---

**Ğ’Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¿Ğ¾ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ?** Ğ¡Ğ¼Ğ¾Ñ‚Ñ€Ğ¸ [CONTRIBUTING.md](CONTRIBUTING.md)
